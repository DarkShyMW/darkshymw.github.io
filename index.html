<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–ª–æ–∂–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã PonySocial</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        h1 {
            font-size: 24px;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
    </style>
    <script>
        function updatePlatformInfo() {
            fetch('https://ponysocial.ru/api/v1/pleroma/healthcheck')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('healthy').textContent = data.ok ? 'üî¥' : 'üü¢';
                    document.getElementById('processed_jobs').textContent = data.job_queue_stats.processed_jobs + " Tasks";
                    document.getElementById('memory_used').textContent = data.memory_used + " Megabytes";
                });
        }

        setInterval(updatePlatformInfo, 10000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    </script>
</head>
<body onload="updatePlatformInfo()">
    <h1>–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã PonySocial</h1>
    <table>
        <tr>
            <th>–°–≤–æ–π—Å—Ç–≤–æ</th>
            <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
        </tr>
        <tr>
            <td>–í–µ—Ä—Å–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</td>
            <td>3.10.4-1-gebfb617b</td>
        </tr>
        <tr>
            <td>–°–æ—Å—Ç–æ—è–Ω–∏–µ</td>
            <td id="healthy"></td>
        </tr>
        <tr>
            <td>–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ</td>
            <td id="processed_jobs"></td>
        </tr>
        <tr>
            <td>–ü–∞–º—è—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</td>
            <td id="memory_used"> Megabytes / 96 GB</td>
        </tr>
    </table>
</body>
</html>
